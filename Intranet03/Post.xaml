<UserControl x:Class="Intranet03.Post"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:local="clr-namespace:Intranet03"
        xmlns:emoji="clr-namespace:Emoji.Wpf;assembly=Emoji.Wpf"
        mc:Ignorable="d"
        Height="734.04" Width="978" Background="#FF09090B">
    <!-- Resources 정의를 UserControl 바로 아래로 이동 -->
    <UserControl.Resources>
        <Style TargetType="DatePicker">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DatePicker">
                        <Grid>
                            <!-- TextBox for displaying the selected date -->
                            <TextBox x:Name="PART_TextBox"
                                 FontFamily="Pretendard Semi-Bold"
                                 FontSize="14"
                                 Margin="0,0,10,0"
                                 mah:TextBoxHelper.Watermark="날짜 선택"
                                 IsReadOnly="True" />

                            <!-- Button for opening the date picker popup -->
                            <Button x:Name="PART_Button"
                                Content="▼"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Width="20"
                                Margin="0,0,14,0"
                                Background="#FFF6F6F6"
                                BorderBrush="{x:Null}"
                                BorderThickness="1" Foreground="#FF09090B" FontFamily="Pretendard" FontSize="9" />

                            <!-- Popup for the calendar -->
                            <Popup x:Name="PART_Popup"
                               Placement="Bottom"
                               StaysOpen="False"
                               IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}">
                                <Border BorderBrush="Gray" BorderThickness="1" Background="White">
                                    <Calendar x:Name="PART_Calendar" />
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Canvas Background="#FF09090B" Width="978">


        <!-- Title -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="3" Canvas.Left="20" Canvas.Top="24"/>

        <!-- Write Button -->
        <Button x:Name="btnPostup" Content="글쓰기" Width="80" FontFamily="Pretendard SemiBold" FontSize="16" Height="31" HorizontalAlignment="Center" Canvas.Left="867" Canvas.Top="78" VerticalAlignment="Center" Click="btnPostup_Click"/>

        <!-- Filters -->
        <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Left" Grid.ColumnSpan="3" 
                    Canvas.Left="33" Canvas.Top="119" VerticalAlignment="Center" Width="914">
            <DatePicker x:Name="dpDate" Width="233" Margin="0,0,10,0" VerticalAlignment="Center" SelectedDateChanged="DatePicker_SelectedDateChanged"/>
            <ComboBox x:Name="cbCategory" Width="140" Margin="0,0,10,0" 
                  mah:TextBoxHelper.Watermark="카테고리 선택" FontFamily="Pretendard Semi-Bold" Height="26" FontSize="14">
                <ComboBoxItem Content="전체"/>
                <ComboBoxItem Content="공지사항"/>
                <ComboBoxItem Content="문제 해결 방법"/>
                <ComboBoxItem Content="RP 관련"/>
                <ComboBoxItem Content="꿀팁"/>
                <ComboBoxItem Content="좌표"/>
            </ComboBox>
            <TextBox x:Name="tbTitle" Width="140" Margin="0,0,10,0" 
                 mah:TextBoxHelper.Watermark="제목 입력" FontFamily="Pretendard Semi-Bold" VerticalAlignment="Center" FontSize="14"/>
            <TextBox x:Name="tbAuthor" Width="140" Margin="0,0,10,0" 
                 mah:TextBoxHelper.Watermark="작성자 입력" FontFamily="Pretendard Semi-Bold" VerticalAlignment="Center" FontSize="14"/>
            <Button x:Name="btnSearch" Content="조회" Width="80" Margin="53,0,8,0" FontFamily="Pretendard SemiBold" FontSize="14" HorizontalAlignment="Right" VerticalAlignment="Center" Click="btnSearch_Click"/>
            <Button x:Name="btnReset" Content="초기화" Width="80" FontFamily="Pretendard SemiBold" FontSize="14" HorizontalAlignment="Right" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- 게시글 목록 -->
        <DataGrid x:Name="dgPostlist" Grid.Row="2"
              AutoGenerateColumns="False"
              HeadersVisibility="Column"
              CanUserAddRows="False"
              CanUserReorderColumns="False" 
              CanUserResizeColumns="False"
              IsReadOnly="True" Grid.ColumnSpan="3" Canvas.Left="33" Canvas.Top="165" 
              HorizontalAlignment="Center" VerticalAlignment="Center" Width="906" Height="502"
              FontFamily="Pretendard Light" FontSize="14"
              MouseRightButtonUp="dgPostlist_MouseRightButtonUp"
              MouseDoubleClick="dgPostlist_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="카테고리" Width="0.5*" Binding="{Binding Category}"/>
                <DataGridTemplateColumn Header="제목" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <InlineUIContainer>
                                    <emoji:TextBlock Text="{Binding Title}" FontSize="14"/>
                                </InlineUIContainer>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="작성자" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <InlineUIContainer>
                                    <emoji:TextBlock Text="{Binding Author}" FontSize="14"/>
                                </InlineUIContainer>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="조회" Width="0.5*" Binding="{Binding Views}"/>
                <DataGridTextColumn Header="작성일" Width="1.5*" Binding="{Binding Date, StringFormat=yyyy-MM-dd HH:mm:ss}"/>
            </DataGrid.Columns>
        </DataGrid>
        <TextBlock Text="게시판" FontFamily="Pretendard ExtraBold" FontSize="48" Foreground="#FFFAFAFA" HorizontalAlignment="Left" Canvas.Left="33" Canvas.Top="10" VerticalAlignment="Top"/>
        <TextBlock Text="게시판에 작성하여 정보를 공유하세요!" 
                   FontFamily="Pretendard Bold" FontSize="24" Foreground="#FFD8D8D8" HorizontalAlignment="Left" Canvas.Left="33" Canvas.Top="72" VerticalAlignment="Top"/>
        <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="2" Canvas.Left="431" Canvas.Top="667" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Button x:Name="btnLeft" Content="&lt;" Width="30" Margin="5"/>
            <TextBlock x:Name="tbPage" Text="1 / 2" VerticalAlignment="Center" Foreground="White" Margin="5"/>
            <Button x:Name="btnRight" Content="&gt;" Width="30" Margin="5"/>
        </StackPanel>

        <!-- Pagination -->

    </Canvas>
</UserControl>
